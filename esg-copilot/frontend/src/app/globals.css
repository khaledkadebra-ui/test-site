@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Design tokens ──────────────────────────────────────────────────────────── */
:root {
  --color-brand:        #16a34a;
  --color-brand-light:  #dcfce7;
  --color-dim-e:        #059669;   /* Environment — emerald */
  --color-dim-s:        #0284c7;   /* Social — sky */
  --color-dim-g:        #7c3aed;   /* Governance — violet */
  --color-surface:      #f8fafc;
  --color-border:       #e8ecf0;
  --radius-card:        16px;
  --shadow-card:        0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.04);
  --shadow-card-hover:  0 4px 16px 0 rgb(0 0 0 / 0.08), 0 2px 6px -2px rgb(0 0 0 / 0.05);
}

/* ── Base ───────────────────────────────────────────────────────────────────── */
@layer base {
  body {
    background-color: var(--color-surface);
    @apply text-gray-900 antialiased;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { @apply bg-gray-200 rounded-full; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-gray-300; }

  /* Smooth focus rings */
  *:focus-visible {
    @apply outline-none ring-2 ring-green-500 ring-offset-2;
  }
}

/* ── Component utilities ────────────────────────────────────────────────────── */
@layer components {

  /* Cards */
  .card {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-card);
    @apply p-6;
  }
  .card-hover {
    @apply card transition-all duration-200;
    &:hover { box-shadow: var(--shadow-card-hover); transform: translateY(-1px); }
  }
  .card-flat {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-card);
    @apply p-6;
  }

  /* Metric card — used for KPI numbers */
  .metric-card {
    @apply card-flat flex flex-col gap-1;
  }
  .metric-value {
    @apply text-3xl font-bold text-gray-900 leading-none;
  }
  .metric-label {
    @apply text-xs font-semibold text-gray-400 uppercase tracking-widest;
  }
  .metric-sub {
    @apply text-xs text-gray-400 mt-1;
  }

  /* Buttons */
  .btn-primary {
    @apply bg-green-600 hover:bg-green-700 active:bg-green-800 text-white font-semibold px-4 py-2.5 rounded-xl transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed text-sm shadow-sm shadow-green-600/20;
  }
  .btn-secondary {
    @apply bg-white hover:bg-gray-50 active:bg-gray-100 text-gray-700 font-medium px-4 py-2.5 rounded-xl transition-all duration-150 text-sm border border-gray-200 shadow-sm;
  }
  .btn-ghost {
    @apply text-gray-500 hover:text-gray-900 hover:bg-gray-100 font-medium px-3 py-2 rounded-lg transition-all duration-150 text-sm;
  }

  /* Forms */
  .input {
    @apply bg-white border border-gray-200 rounded-xl px-3.5 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent w-full text-sm transition-all;
  }
  .label {
    @apply text-sm font-medium text-gray-700 mb-1.5 block;
  }

  /* Headings inside cards */
  .section-title {
    @apply text-sm font-bold text-gray-500 uppercase tracking-wider mb-4;
  }

  /* Stat pill (small info badge) */
  .pill {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }
  .pill-green  { @apply pill bg-green-50  text-green-700  border border-green-200;  }
  .pill-amber  { @apply pill bg-amber-50  text-amber-700  border border-amber-200;  }
  .pill-blue   { @apply pill bg-blue-50   text-blue-700   border border-blue-200;   }
  .pill-red    { @apply pill bg-red-50    text-red-700    border border-red-200;    }
  .pill-violet { @apply pill bg-violet-50 text-violet-700 border border-violet-200; }
  .pill-gray   { @apply pill bg-gray-100  text-gray-600;                            }

  /* Progress bar */
  .progress-track {
    @apply h-2 bg-gray-100 rounded-full overflow-hidden;
  }
  .progress-fill {
    @apply h-full rounded-full transition-all duration-700 ease-out;
  }

  /* Divider */
  .divider {
    @apply border-t border-gray-100 my-4;
  }

  /* Page header (sticky top bar inside page content) */
  .page-header {
    @apply bg-white border-b px-8 py-5 flex items-center justify-between;
    border-color: var(--color-border);
  }
  .page-header-title {
    @apply text-xl font-bold text-gray-900 flex items-center gap-2;
  }
  .page-header-sub {
    @apply text-sm text-gray-400 mt-0.5;
  }

  /* Table */
  .data-table { @apply w-full text-sm; }
  .data-table thead tr { @apply border-b bg-gray-50/60; border-color: var(--color-border); }
  .data-table thead th { @apply text-left text-xs font-semibold text-gray-400 uppercase tracking-wider px-5 py-3; }
  .data-table tbody tr { @apply border-b transition-colors hover:bg-gray-50/50 last:border-0; border-color: var(--color-border); }
  .data-table tbody td { @apply px-5 py-3.5; }

  /* Dimension color accents */
  .dim-e { color: var(--color-dim-e); }
  .dim-s { color: var(--color-dim-s); }
  .dim-g { color: var(--color-dim-g); }
  .bg-dim-e { background-color: color-mix(in srgb, var(--color-dim-e) 10%, white); }
  .bg-dim-s { background-color: color-mix(in srgb, var(--color-dim-s) 10%, white); }
  .bg-dim-g { background-color: color-mix(in srgb, var(--color-dim-g) 10%, white); }
  .border-dim-e { border-color: color-mix(in srgb, var(--color-dim-e) 30%, white); }
  .border-dim-s { border-color: color-mix(in srgb, var(--color-dim-s) 30%, white); }
  .border-dim-g { border-color: color-mix(in srgb, var(--color-dim-g) 30%, white); }
}

/* ── Animations ─────────────────────────────────────────────────────────────── */
@layer utilities {
  .animate-ring {
    animation: ringFill 1s ease-out forwards;
  }
  @keyframes ringFill {
    from { stroke-dasharray: 0 999; }
  }

  .animate-count-up {
    animation: countUp 0.6s ease-out;
  }
  @keyframes countUp {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0);   }
  }

  .fade-in {
    animation: fadeIn 0.4s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to   { opacity: 1; transform: translateY(0);   }
  }

  /* Subtle pulse for "live" indicators */
  .pulse-dot::before {
    content: '';
    @apply absolute w-2 h-2 rounded-full bg-green-500 opacity-75;
    animation: pulse 2s infinite;
  }
}
